(function(){"use strict";angular.module("app",["ngCookies","angular-jwt"]);angular.module("app").controller("LoginController",["$scope","$http","$window","$cookies","jwtHelper",function($scope,$http,$window,$cookies,jwtHelper){$scope.loginFailed=!1;$scope.login=function(){$scope.loginFailed=!1;return $http.post("/authenticate",{email:$scope.email,password:$scope.password}).success(function(data,status,headers,config){var expDate;expDate=jwtHelper.getTokenExpirationDate(data.token);$cookies.put("token",data.token,{expires:expDate});return $window.location.href="/game"}).error(function(data,status,headers,config){$scope.loginFailed=!0;401===status&&toastr.error("Invalid username or password","Authentication failed");return 502===status?toastr.error("Login server offline, try again later","Authentication failed"):void 0})}}]);angular.module("app").controller("UserMenuController",["$scope","$window","$cookies",function($scope,$window,$cookies){$scope.logout=function(){$cookies.remove("token");return $window.location.href="/"}}]);toastr.options.positionClass="toast-bottom-right";})();