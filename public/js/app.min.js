(function(){"use strict";angular.module("app",["ngCookies","angular-jwt"]);angular.module("app").controller("LoginController",["$scope","$http","$window","$cookies","jwtHelper",function($scope,$http,$window,$cookies,jwtHelper){$scope.authFailed=!1;$scope.serverOffline=!1;$scope.login=function(){$scope.authFailed=!1;$scope.serverOffline=!1;return $http.post("/authenticate",{email:$scope.email,password:$scope.password}).success(function(data,status,headers,config){var expDate;expDate=jwtHelper.getTokenExpirationDate(data.token);$cookies.put("token",data.token,{expires:expDate});return $window.location.href="/game"}).error(function(data,status,headers,config){401===status&&($scope.authFailed=!0);return 502===status?$scope.serverOffline=!0:void 0})}}]);})();