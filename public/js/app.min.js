(function(){"use strict";angular.module("login",["ngCookies","angular-jwt"]);angular.module("game",["ngCookies","angular-jwt"]);toastr.options.positionClass="toast-bottom-right";angular.module("login").controller("LoginController",["$scope","$http","$window","$cookies","jwtHelper",function($scope,$http,$window,$cookies,jwtHelper){$scope.loginFailed=!1;$scope.login=function(){$scope.loginFailed=!1;return $http.post("/authenticate",{email:$scope.email,password:$scope.password}).success(function(data,status,headers,config){var expDate;expDate=jwtHelper.getTokenExpirationDate(data.token);$cookies.put("token",data.token,{expires:expDate});return $window.location.href="/game"}).error(function(data,status,headers,config){$scope.loginFailed=!0;401===status&&toastr.error("Invalid username or password","Authentication failed");return 502===status?toastr.error("Login server offline, try again later","Authentication failed"):void 0})}}]);angular.module("game").controller("UserMenuController",["$scope","$window","$cookies","jwtHelper",function($scope,$window,$cookies,jwtHelper){var init;init=function(){var payload,token;token=$cookies.get("token");payload=jwtHelper.decodeToken(token);return $scope.username=payload.username};$scope.logout=function(){$cookies.remove("token");return $window.location.href="/"};init()}]);})();